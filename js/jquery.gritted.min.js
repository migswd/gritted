!function(t,e){"use strict";function i(n,r){function o(){f.hasChanged()&&f.redispatch()}this.settings=e.extend({},i.DEFAULTS,n.data(),r),this.$grid=n;var a=n.children().remove().css({position:"absolute",top:-500,left:-500});this.elements=e.map(a,e);var l=this.settings.cols*this.settings.rows;n.html(new Array(l+1).join('<div class="'+this.settings.fillItemsClass+'"></div>'));var h=n.children();this.gridItems=e.map(h,e),a.appendTo(n),this.defineHoles(this.settings.holes);var f=this;e(t).on("resize",s(o,400))}function s(t,e){return e=e||250,function(){var i=this,s=arguments;clearTimeout(t.hnd),t.hnd=setTimeout(function(){t.apply(i,s)},e)}}function n(t){var e=t.random(),i=e[0],s=e[1];return i+Math.floor(Math.random()*(s-i))}function r(t){var i={};return t&&-1!==t.indexOf(",")&&e.each(t.split(","),function(t,e){i[e.trim()]=!0}),i}function o(t,e,i){this.index=t+1,this.name=a[i]+e}var a=" ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");i.filters={"default":function(){return{}},explode:function(t){var e=t.width(),i=t.height();return{top:n([[-1.5*i,-.5*i],[1.5*i,2.5*i]]),left:n([[-1.5*e,-.5*e],[1.5*e,2.5*e]])}}},i.DEFAULTS={cols:10,rows:10,fillItemsClass:"floating",filteredItemsClass:"filtered",duration:1e3,easing:"",filterOut:i.filters.default},i.prototype={redispatch:function(){for(var t,e,i,s,n,r,a=this,l=a.holes,h=a.settings.duration,f=a.filterClass,d=a.settings.filterOut,u=a.elements,c=a.gridItems,m=-666,p=0,g=c.length,v=0,C=u.length,w=1,I=0;g>p&&C>v;)r=u[v],t=c[p].position(),e=t.left,i=t.top,i!==m?(I++,m=i,w=1):w++,s=new o(p,w,I),s.isHole(l)||(n={left:e,top:i},f&&(r.hasClass(f)||r.hasClass("filtered")||(n=d(a.$grid,u[v],v),r.addClass("filtered"))),r.text(s.name).animate(n,h),v++),p++},hasChanged:function(){for(var t=!1,e=1,i=1,s=this.gridItems[0].position().top;this.gridItems[i++].position().top===s;)e++;return t=e!==this.numberOfColumns,this.numberOfColumns=e,t},filter:function(t,i){var s=this;t!==s.filterClass&&(e(".filtered",s.$grid).removeClass("filtered"),s.filterClass=t,i&&(s.settings.filterOut=i),s.redispatch())},defineHoles:function(t){this.holes=r(t),this.redispatch()}},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},o.prototype={isHole:function(t){return t?t[this.index]||t[this.name]:!1}},e.fn.gritted=function(t){return e(this).each(function(s,n){e(n).data("gritted",new i(e(n),t))})}}(window,jQuery||Zepto);