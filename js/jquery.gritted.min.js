!function(t,i){function n(s,o){function r(){f.hasChanged()&&f.redispatch()}this.settings=i.extend({},n.DEFAULTS,s.data(),o),this.$grid=s;var a=s.children().remove().css({position:"absolute",top:-500,left:-500});this.elements=i.map(a,i);var h=this.settings.cols*this.settings.rows;s.html(new Array(h+1).join('<div class="'+this.settings.fillItemsClass+'"></div>'));var l=s.children();this.gridItems=i.map(l,i),a.appendTo(s),this.defineHoles(this.settings.holes);var f=this;i(t).on("resize",e(r,400))}function e(t,i){return i=i||250,function(){var n=this,e=arguments;clearTimeout(t.hnd),t.hnd=setTimeout(function(){t.apply(n,e)},i)}}function s(t){var i=t.random(),n=i[0],e=i[1];return n+Math.floor(Math.random()*(e-n))}function o(t){var n={};return t&&-1!==t.indexOf(",")&&i.each(t.split(","),function(t,i){n[i.trim()]=!0}),n}function r(t,i,n){this.index=t+1,this.name=a[n]+i}var a=" ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");n.filters={dissolve:function(t,i){var n=t.width(),e=t.height();i.animate({top:s([-1.5*e,-.5*e],[1.5*e,2.5*e]),left:s([-1.5*n,-.5*n],[1.5*n,2.5*n])})}},n.DEFAULTS={cols:10,rows:10,fillItemsClass:"floating",duration:1e3,easing:"",filterOut:n.filters.dissolve},n.prototype={redispatch:function(){for(var t=this,i=t.holes,n=t.settings.duration,e=t.elements,s=t.gridItems,o=-666,a=0,h=s.length,l=0,f=e.length,d=1,u=0;h>a&&f>l;){var c=s[a].position(),m=c.left,p=c.top;p!==o?(u++,o=p,d=1):d++;var g=new r(a,d,u);g.isHole(i)||(e[l].text(g.name).animate({left:m,top:p},n),l++),a++}},hasChanged:function(){for(var t=!1,i=1,n=1,e=this.gridItems[0].position().top;this.gridItems[n++].position().top===e;)i++;return t=i!==this.numberOfColumns,this.numberOfColumns=i,t},filter:function(t){this.filter=t,this.redispatch()},defineHoles:function(t){this.holes=o(t),this.redispatch()}},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},r.prototype={isHole:function(t){return t?t[this.index]||t[this.name]:!1}},i.fn.gritted=function(t){return i(this).each(function(e,s){i(s).data("gritted",new n(i(s),t))})}}(window,jQuery||Zepto);